<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Mars</title>
	<link rel="stylesheet" type="text/css" href="decoration/calendrier.css"/>
	<script src="data/data.js"></script>
</head>

<body>
	
<script>

	var mois_dernier = {"debut":29,"fin":30};
	var mois_courant = {"debut":1,"fin":31};
	var mois_suivant = {"debut":1,"fin":2};
		
	function genererMois(mois, actif)
	{
		html = "";	
		for(jour = mois["debut"]; jour <= mois["fin"]; jour++)
		{
			html += '<li'+ ((actif)?' id="'+jour+'"':'') +'><span>' + jour + '</span></li>';
		}
		return '<ul>' + html + '</ul>';
	}
	document.getElementsByTagName("body")[0].innerHTML = '';
	document.getElementsByTagName("body")[0].innerHTML += '<li id="mois-dernier">'+ genererMois(mois_dernier, false) + '</li>';
	document.getElementsByTagName("body")[0].innerHTML += '<li id="mois-courant">'+ genererMois(mois_courant, true) + '</li>';
	document.getElementsByTagName("body")[0].innerHTML += '<li id="mois-suivant">'+ genererMois(mois_suivant, false) + '</li>';
	document.getElementsByTagName("body")[0].innerHTML = '<ol id="calendrier">'+document.getElementsByTagName("body")[0].innerHTML+'</ol>';

	
	var couleur;
	function afficherListeTaches(listeTaches)
	{
		for(titre in listeTaches)
		{
			tache = listeTaches[titre];
			debut = tache["debut"].split("-");
			couleur = tache["couleur"]?tache["couleur"]:couleur;
			document.getElementById(debut[2]).innerHTML += '<p style="background-color:'+couleur+';">' + titre + '</p>';
			if(tache["taches"]) afficherListeTaches(tache["taches"]);
		}
	}

	for(cleTheme in themes)
	{
		theme = themes[cleTheme];
		afficherListeTaches(theme);
	}
	
</script>

</body>

</html>